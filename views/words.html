{{ block "word-entry" . }}
<form hx-swap="outerHTML" hx-post="/words">
    Word: <input {{ if.Values.original }} value="{{ .Values.original }}" {{ end }} type="text" name="original">

    Translation: <input {{ if.Values.translation }} value="{{ .Values.translation }}" {{ end }} type="text" name="translation">

    {{ if .Errors.original }}
        <div style="color: red;">{{ .Errors.original }}</div>
    {{ end }}

    <button type="submit">Add word</button>
</form>
{{ end }}

{{ block "display" . }}
<div id="words" style="display: flex; flex-direction: column;" class="words">
    {{ range .Words }}
        {{ template "word" . }}
    {{ end }}
</div>
{{ end }}

{{ block "word" . }}
<div class="word" id="word-{{ .Id }}" style="display: flex;">
    <div hx-indicator="#di-{{ .Id }}" hx-target="#word-{{ .Id }}" hx-swap="outerHTML" hx-delete="/words/{{ .Id }}"  style="width: 1rem;">
        <i class="fa fa-trash" aria-hidden="true"></i>
    </div>

    <b>Word:</b> <span>{{ .Original }}</span>
    <b>Translation:</b> <span>{{ .Translation }}</span>

    <div id="di-{{ .Id }}" class="htmx-indicator">
        <i class="fa fa-circle-o-notch fa-spin fa-ig fa-fw"></i>
    </div>
</div>
{{ end }}

{{ block "oob-word" . }}
<div id="words" hx-swap-oob="afterbegin">
    {{ template "word-table" . }}
</div>
{{ end }}

{{ block "search" . }}
<div class="search-bar"> Search:
<input class="form-control" 
        type="search" 
        name="search"
        hx-post="/search" 
        hx-trigger="input changed delay:500ms, search" 
        hx-target="#search-results" 
        hx-indicator=".htmx-indicator">
</div>
{{ end }}

{{ block "search-result" . }}
<tr class="search-result" id="result-{{ .Id }}">
    <td>{{ .Original }}</td>
    <td>{{ .Translation }}</td>
</tr>
{{ end }}

{{ block "search-results" . }}
<table id="search-results" class="search-results">
    <thead>
        <tr>
            <th scope="col">Word</th>
            <th scope="col">Definition</th>
        </tr>
    </thead>
    <tbody>
        {{ range .SearchResults }}
            {{ template "search-result" . }}
        {{ end }}
    </tbody>
</table>
{{ end }}

{{ block "table" . }}
<table id="words" class="words">
    <thead>
        <tr>
            <th scope="col">Word</th>
            <th scope="col">Definition</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        {{ range .Words }}
            {{ template "word-table" .}}
        {{ end }}
    </tbody>
</table>
{{ end }}

{{ block "word-table" . }}
<tr class="word" id="word-{{ .Id }}">
    <td>{{ .Original }}</td>
    <td>{{ .Translation }}</td>
    <td>
        <div class="actions-container" style="display: flex; justify-content: center; align-items: center;">
            <div hx-indicator="#di-{{ .Id }}" hx-target="#word-{{ .Id }}" hx-swap="outerHTML" hx-delete="/words/{{ .Id }}"  style="width: 1rem; cursor: pointer;">
                <i class="fa fa-trash" aria-hidden="true"></i>
            </div>
    
            <div id="di-{{ .Id }}" class="htmx-indicator">
                <i class="fa fa-circle-o-notch fa-spin fa-ig fa-fw"></i>
            </div>
        </div>
    </td>
</tr>
{{ end }}